!function(){"use strict";function a(b){var e,c=this,d=null;if("function"!=typeof b)throw new TypeError("Promise resolver is not a function");if(!(c instanceof a))throw new TypeError("undefined is not a promise");c.state="pending",c.value=void 0,c.onfulfilledCallbacks=[],c.onrejectedCallbacks=[],e=function(a,b){"pending"===c.state&&(c.state=a,c.value=b,d=setTimeout(function(){clearTimeout(d),d=null;for(var b="fulfilled"===a?c.onfulfilledCallbacks:c.onrejectedCallbacks,e=0;e<b.length;e++)b[e](c.value)}))};try{b(function(a){e("fulfilled",a)},function(a){e("rejected",a)})}catch(f){e("rejected",f.message)}}function b(a,c,d,e){var f,h;if(c===a)throw new TypeError("Chaining cycle detected for promise #<Promise>");if(null!==c&&/^(object|function)$/i.test(typeof c)){try{f=c.then}catch(g){e(g)}if("function"==typeof f){h=!1;try{f.call(c,function(c){h||(h=!0,b(a,c,d,e))},function(a){h||(h=!0,e(a))})}catch(g){if(h)return;e(g)}return}}d(c)}function c(a,c,d,e,f){try{var g=a(c);b(d,g,e,f)}catch(h){f(h)}}function d(a){return null!==a&&/^(object|function)$/i.test(typeof a)&&"function"==typeof a.then?!0:!1}a.prototype={constructor:a,then:function(b,d){var f,e=this;return"function"!=typeof b&&(b=function(a){return a}),"function"!=typeof d&&(d=function(a){throw a}),f=new a(function(a,g){switch(e.state){case"fulfilled":setTimeout(function(){c(b,e.value,f,a,g)});break;case"rejected":setTimeout(function(){c(d,e.value,f,a,g)});break;default:e.onfulfilledCallbacks.push(function(d){c(b,d,f,a,g)}),e.onrejectedCallbacks.push(function(b){c(d,b,f,a,g)})}})},"catch":function(a){return this.then(null,a)}},"undefined"!=typeof Symbol&&(a.prototype[Symbol.toStringTag]="Promise"),a.resolve=function(b){return new a(function(a){a(b)})},a.reject=function(b){return new a(function(a,c){c(b)})},a.all=function(b){if(!Array.isArray(b))throw new TypeError("promises must be an Array");var c=0,e=[];return new a(function(f,g){for(var h=0;h<b.length;h++)!function(h){var i=b[h];d(i)||(i=a.resolve(i)),i.then(function(a){c++,e[h]=a,c>=b.length&&f(e)}).catch(function(a){g(a)})}(h)})},a.deferred=function(){var b={};return b.promise=new a(function(a,c){b.resolve=a,b.reject=c}),b},"undefined"!=typeof window&&(window.Promise=a),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=a)}();